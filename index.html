<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <title>WWeek 9 - Homework Task - Death Rates Over the World</title>
    <!-- Vega & Vega-Lite -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
</head>
<!-- Navbar -->
<nav>
    <h1>Death Rate Map</h1>
    <h2>Eyad El Hajj - 33180830 - Lab03 - Karan R.</h2>
</nav>

<!-- Vega-Lite container -->
<main>
    <div id="vis"></div>
</main>

<script>
    const spec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
        "width": 800,
        "height": 400,
        "data": {
            "url": "https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json",
            "format": { "type": "topojson", "feature": "countries" }
        },
        "transform": [
            {
                "calculate": "datum.properties.name === 'Russia' ? 'Russian Federation' : datum.properties.name === 'Syria' ? 'Syrian Arab Republic' : datum.properties.name === 'Czechia' ? 'Czech Republic' : datum.properties.name === 'S. Sudan' ? 'South Sudan' : datum.properties.name === 'Dem. Rep. Congo' ? 'Democratic Republic of the Congo' : datum.properties.name === 'South Korea' ? 'Republic of Korea' : datum.properties.name === 'North Korea' ? 'Democratic People\\'s Republic of Korea' : datum.properties.name === 'Cape Verde' ? 'Cabo Verde' : datum.properties.name === 'Laos' ? 'Lao People\\'s Democratic Republic' : datum.properties.name === 'Czech Republic' ? 'Czechia' : datum.properties.name === 'Moldova' ? 'Republic of Moldova' : datum.properties.name === 'Tanzania' ? 'United Republic of Tanzania' : datum.properties.name === 'Bolivia' ? 'Bolivia (Plurinational State of)' : datum.properties.name === 'Brunei' ? 'Brunei Darussalam' : datum.properties.name === 'Timor-Leste' ? 'Timor-Leste' : datum.properties.name === 'Micronesia' ? 'Micronesia (Federated States of)' : datum.properties.name === 'Palestine' ? 'State of Palestine' : datum.properties.name === 'Macedonia' ? 'North Macedonia' : datum.properties.name === 'Venezuela' ? 'Venezuela (Bolivarian Republic of)' : datum.properties.name === 'Central African Rep.' ? 'Central African Republic' : datum.properties.name === 'Iran' ? 'Iran (Islamic Republic of)' : datum.properties.name === 'Turkey' ? 'Türkiye' : datum.properties.name === 'The Bahamas' ? 'Bahamas' : datum.properties.name === 'eSwatini' ? 'Eswatini' : datum.properties.name === 'Slovak Republic' ? 'Slovakia' : datum.properties.name === 'Saint Kitts and Nevis' ? 'Saint Kitts and Nevis' : datum.properties.name === 'Vietnam' ? 'Viet Nam' : datum.properties.name === 'Côte d\\'Ivoire' ? 'Côte d\\'Ivoire' : datum.properties.name === 'Côte d’Ivoire' ? 'Côte d\\'Ivoire' : datum.properties.name === 'Ivory Coast' ? 'Côte d\\'Ivoire' : datum.properties.name",
                "as": "lookup_name"
            },
            {
                "lookup": "lookup_name",
                "from": {
                    "data": {
                        "url": "https://raw.githubusercontent.com/eyadhajj/Week-9-Homework-Task/refs/heads/main/IHME-GBD_2021_DATA-6b23a41d-1.csv"
                    },
                    "key": "location_name",
                    "fields": ["val"]
                }
            }
        ],
        "projection": { "type": "equirectangular" },
        "mark": "geoshape",
        "encoding": {
            "color": {
                "field": "val",
                "type": "quantitative",
                "scale": { "scheme": "reds", "unknown": "#d3d3d3" },
                "legend": { "title": "Death Rate" }
            },
            "tooltip": [
                { "field": "properties.name", "title": "Country" },
                { "field": "val", "type": "quantitative", "title": "Rate of Death" }
            ]
        }
    };

    vegaEmbed('#vis', spec);
</script>

<div class="container">
  <div class="row text-center">
    
    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body">
          <h2>Domain</h2>
          <p>This visualization shows the death rates across different countries in the world,
            highlighting the disparities and trends in health outcomes.</p>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body">
          <h2>Dataset Information</h2>
          <p>The dataset used in this visualization is sourced from the Institute for Health
            Metrics and Evaluation (IHME) Global Burden of Disease (GBD) Study 2021. It provides
            comprehensive data on death rates by country, which is crucial for understanding
            global health patterns.</p>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body">
          <h2>Dataset Transformations</h2>
          <p>Several transformations were applied to the dataset to ensure accurate mapping and
            representation. These include renaming certain countries to match the naming
            conventions used in the geographical data, as well as filtering and aggregating data
            to focus on relevant metrics.</p>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body">
          <h2>Idiom Justification</h2>
        </div>
      </div>
    </div>

  </div>
</div>

</br>
</body>

</html>